<!-- Hero Section -->
<section class="hero-section">
  <div class="container">
    <div class="hero-content">
      <h1 class="hero-title">Métricas y Análisis</h1>
      <p class="hero-subtitle">Visualiza y analiza los datos de tu barbería</p>
    </div>
  </div>
</section>

<!-- Métricas Section -->
<section class="metricas-section">
  <div class="container">
    <!-- Placeholder para futuros filtros de fecha -->
    <div class="filters-section">
      <div class="filters-card">
        <h3 class="filters-title">
          <i class="bi bi-funnel"></i> Filtros de Consulta
        </h3>
        <p class="filters-description">
          Los filtros de fecha y rango estarán disponibles cuando se conecte la base de datos.
        </p>
      </div>
    </div>

    <!-- Grid de Métricas -->
    <div class="metricas-grid">
      <!-- Tarjeta de Reservas -->
      <div class="metrica-card">
        <div class="metrica-header">
          <i class="bi bi-calendar-check metrica-icon"></i>
          <h3 class="metrica-title">Reservas</h3>
        </div>
        <div class="metrica-body">
          <div style="display: block; height: 300px;"
            *ngIf="isBrowser && barChartData.datasets[0].data.length > 0; else noDataCitas">
            <canvas baseChart [data]="barChartData" [options]="barChartOptions" [type]="barChartType">
            </canvas>
          </div>
          <ng-template #noDataCitas>
            <p>No hay datos de reservas disponibles.</p>
          </ng-template>
        </div>
      </div>

      <!-- Tarjeta de Ingresos -->
      <div class="metrica-card">
        <div class="metrica-header">
          <i class="bi bi-currency-dollar metrica-icon"></i>
          <h3 class="metrica-title">Ingresos</h3>
        </div>
        <div class="metrica-body">
          <div style="display: block; height: 300px;"
            *ngIf="isBrowser && pieChartData.datasets[0].data.length > 0; else noDataIngresos">
            <canvas baseChart [data]="pieChartData" [options]="pieChartOptions" [type]="pieChartType">
            </canvas>
          </div>
          <ng-template #noDataIngresos>
            <p>No hay datos de ingresos disponibles.</p>
          </ng-template>
        </div>
      </div>

      <!-- Tarjeta de Servicios -->
      <div class="metrica-card">
        <div class="metrica-header">
          <i class="bi bi-scissors metrica-icon"></i>
          <h3 class="metrica-title">Servicios Más Populares</h3>
        </div>
        <div class="metrica-body">
          <div style="display: block; height: 300px;"
            *ngIf="isBrowser && serviciosChartData.datasets[0].data.length > 0; else noDataServicios">
            <canvas baseChart [data]="serviciosChartData" [options]="serviciosChartOptions" [type]="serviciosChartType">
            </canvas>
          </div>
          <ng-template #noDataServicios>
            <p>No hay datos de servicios disponibles.</p>
          </ng-template>
        </div>
      </div>

      <!-- Tarjeta de Barberos -->
      <div class="metrica-card">
        <div class="metrica-header">
          <i class="bi bi-people metrica-icon"></i>
          <h3 class="metrica-title">Rendimiento de Barberos</h3>
        </div>
        <div class="metrica-body">
          <div style="display: block; height: 300px;"
            *ngIf="isBrowser && rankingChartData.datasets[0].data.length > 0; else noDataRanking">
            <canvas baseChart [data]="rankingChartData" [options]="rankingChartOptions" [type]="rankingChartType">
            </canvas>
          </div>
          <ng-template #noDataRanking>
            <p>No hay datos de ranking disponibles.</p>
          </ng-template>
        </div>
      </div>

      <!-- Tarjeta de Clientes -->
      <div class="metrica-card">
        <div class="metrica-header">
          <i class="bi bi-person-check metrica-icon"></i>
          <h3 class="metrica-title">Clientes Frecuentes</h3>
        </div>
        <div class="metrica-body">
          <div style="display: block; height: 300px;"
            *ngIf="isBrowser && clientesChartData.datasets[0].data.length > 0; else noDataClientes">
            <canvas baseChart [data]="clientesChartData" [options]="clientesChartOptions" [type]="clientesChartType">
            </canvas>
          </div>
          <ng-template #noDataClientes>
            <p>No hay datos de clientes disponibles.</p>
          </ng-template>
        </div>
      </div>

      <!-- Tarjeta de Productos -->
      <div class="metrica-card">
        <div class="metrica-header">
          <i class="bi bi-box-seam metrica-icon"></i>
          <h3 class="metrica-title">Productos Vendidos</h3>
        </div>
        <div class="metrica-body">
          <div style="display: block; height: 300px;"
            *ngIf="isBrowser && productosChartData.datasets[0].data.length > 0; else noDataProductos">
            <canvas baseChart [data]="productosChartData" [options]="productosChartOptions" [type]="productosChartType">
            </canvas>
          </div>
          <ng-template #noDataProductos>
            <p>No hay datos de productos disponibles.</p>
          </ng-template>
        </div>
      </div>
    </div>

    <!-- Sección de Consultas Personalizadas -->
    <div class="consultas-section">
      <div class="consultas-card">
        <div class="consultas-header">
          <h2 class="section-title">
            <i class="bi bi-database"></i> Consultas Personalizadas
          </h2>
        </div>
        <div class="consultas-body">
          <p class="consultas-description">
            Aquí podrás realizar consultas personalizadas a la base de datos una vez que esté conectada.
            Podrás filtrar por fechas, servicios, barberos, clientes y más.
          </p>
          <div class="consultas-placeholder">
            <i class="bi bi-code-square"></i>
            <p>Área de consultas SQL personalizadas</p>
            <small>Disponible después de la conexión a la base de datos</small>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>